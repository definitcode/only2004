// guessing, you can't talk to him directly in rsc
[opnpc1,door_man] mes("The Door man does not appear interested in talking.");

[label,door_man_chat]
~chatnpc("<p,neutral>You cannot pass through this door without paying the trading tax.");
~chatplayer("<p,quiz>What do I need to pay?");
~chatnpc("<p,neutral>50,000 coins.");
def_int $option = ~p_choice3("Okay...", 1, "50,000 coins?! Are you crazy?", 2, "I haven't brought my coin purse with me...", 3);
if($option = 1) {
    ~chatplayer("<p,neutral>Okay...");
    if(inv_total(inv, coins) < 50000) {
        ~chatplayer("<p,sad>I haven't brought my coin purse with me...");
        return;
    }
    if_close;
    inv_del(inv, coins,50000);
    mes("You give the doorman 50,000!");
    ~open_and_close_door(loc_1535, ~check_axis(coord, loc_coord, loc_angle), false);
} else if($option = 2) {
    ~chatplayer("<p,confused>50,000?!|Are you crazy?");
    ~chatnpc("<p,neutral>Nope. Those are the rules.");
} else if($option = 3) {
    ~chatplayer("<p,sad>I haven't brought my coin purse with me...");
}

[oploc1,loc_2411]
if(loc_coord = 0_50_149_38_22) {
    // eastern door
    if(coordx(coord) = coordx(loc_coord)) {
        ~open_and_close_door(loc_1535, ~check_axis(coord, loc_coord, loc_angle), false);
        return;
    }
} else if(loc_coord = 0_50_149_33_18) {
    // southern door
    if(coordz(coord) < coordz(loc_coord)) {
        ~open_and_close_door(loc_1535, ~check_axis(coord, loc_coord, loc_angle), false);
        return;
    }
}
npc_findallzone(coord);
while (npc_findnext = true) {
    if (npc_type = door_man) {
        @door_man_chat;
    }
}



//if (npc_findhero = true) {
//    queue(, 0);
//}
//gosub(npc_death);
//
//[queue,]
//mes("You scratch a notch on your bow for the kill.");
//% = calc(% + 1);